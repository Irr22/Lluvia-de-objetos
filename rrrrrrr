import minecraft_launcher_lib, os, subprocess

user_window = os.environ['USERNAME']
minecraft_directory = f"C:/Users/{user_window}/AppData/Roaming/.iceLauncher"

# Ver todas las versiones que tengo instaladas
versiones_instaladas = minecraft_launcher_lib.utils.get_installed_versions(minecraft_directory)

def installar_minedraft():
    # Instalar Minecraft
    minecraft_version = input('Version: ')
    minecraft_launcher_lib.install.install_minecraft_version(minecraft_version, minecraft_directory)


def install_forge():
    # Instalar Forge
    minecraft_version = input('Version: ')
    forge = minecraft_launcher_lib.forge.find_forge_version(minecraft_version)
    print(forge)
    minecraft_launcher_lib.forge.install_forge_version(
        forge, minecraft_directory)
    print('Instalado forge')

def ejecutar_minecraft():
    mine_user = input('Porfavor introduzca su nombre: ')
    version = input('Porfavor introduzca la version: ')

    options = {
        'username': mine_user,
        'uuid' : '',
        'token' : '',

        'jvmArguments': ["-Xmx4G","-Xmx4G"], # Memoria ram que consumira el Minecraft
        'launcherVersion': "0.0.2"
    }
    # Ejecutar Mnecraft
    minecraft_command = minecraft_launcher_lib.command.get_minecraft_command(version,minecraft_directory,options)
    
    subprocess.run(minecraft_command)



def menu():
    print('Bienvenido al launcher')
    print(' Installar minecraft (0).\n Installar forge (1).\n Abrir minecraft (2)')
    respuesta = input('Que quieres hacer: ')

    if respuesta == '0':
        installar_minedraft()
    elif respuesta == '1':
        install_forge()
    elif respuesta == '2':
        ejecutar_minecraft()


menu()
